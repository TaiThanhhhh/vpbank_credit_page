{% extends "base.html" %} {% block content %}
<div class="container">
  <div class="credit-lookup-card">
    <h2 class="card-title">CREDIT SCORE LOOK-UP</h2>

    <form id="creditForm" class="credit-form">
      <div class="form-group">
        <label for="fullName">Full Name:</label>
        <input
          type="text"
          id="fullName"
          name="full_name"
          placeholder="NGUYEN VAN A"
          required
        />
      </div>

      <div class="form-group">
        <label for="nationalId">National ID No.</label>
        <input
          type="text"
          id="nationalId"
          name="national_id"
          placeholder="001*******"
          required
        />
      </div>

      <button type="submit" class="search-btn">
        <i class="fas fa-search"></i> Search
      </button>
    </form>

    <div id="loadingSpinner" class="loading-spinner" style="display: none">
      <i class="fas fa-spinner fa-spin"></i>
      <p>Đang tra cứu thông tin...</p>
    </div>

    <div id="errorMessage" class="error-message" style="display: none"></div>

    <div id="creditResult" class="credit-result" style="display: none">
      <h3>User's Credit Score</h3>

      <div class="gauge-chart">
        <div class="gauge-background"></div>
        <div class="gauge-inner"></div>
        <div class="gauge-needle"></div>
        <div class="gauge-center-dot"></div>
        <div class="gauge-center">
          <div class="score-number" id="scoreNumber">735</div>
          <div class="score-label" id="scoreLabel">Good</div>
        </div>
      </div>

      <div class="gauge-markers">
        <span class="marker">300</span>
        <span class="marker">Credit Level</span>
        <span class="marker">850</span>
      </div>

      <div class="contributing-factors">
        <h4>Top Contributing Factors</h4>
        <div class="factors-grid">
          <div class="factor-item">
            <div class="factor-percentage" id="utilizationPercent">24%</div>
            <div class="factor-label">Credit Card Utilization</div>
          </div>
          <div class="factor-item">
            <div class="factor-percentage" id="paymentPercent">99%</div>
            <div class="factor-label">Payment History</div>
          </div>
          <div class="factor-item">
            <div class="factor-years" id="historyYears">6 years</div>
            <div class="factor-months" id="historyMonths">7 months</div>
            <div class="factor-label">Credit History Length</div>
          </div>
        </div>
      </div>

      <div class="explanation-section">
        <h4>Explanation</h4>
        <p id="explanationText"></p>
      </div>

      <div class="action-buttons">
        <button id="newSearchBtn" class="btn btn-primary">
          <i class="fas fa-search"></i> New Search
        </button>
        <button id="viewHistoryBtn" class="btn btn-secondary">
          <i class="fas fa-history"></i> Search History
        </button>
        <button id="getTipsBtn" class="btn btn-success">
          <i class="fas fa-lightbulb"></i> Improvement Tips
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for Tips -->
<div id="tipsModal" class="modal" style="display: none">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Tips cải thiện điểm tín dụng</h3>
      <span class="close" id="closeTipsModal">&times;</span>
    </div>
    <div class="modal-body">
      <ul id="tipsList"></ul>
    </div>
  </div>
</div>

<!-- Modal for History -->
<div id="historyModal" class="modal" style="display: none">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Lịch sử tra cứu</h3>
      <button
        class="close"
        id="closeHistoryModal"
        onclick="closeHistoryModal()"
      >
        ×
      </button>
    </div>
    <div class="modal-body">
      <div id="historyList"></div>
      <button
        id="clearHistoryBtn"
        style="
          margin-top: 15px;
          padding: 10px 20px;
          background-color: #dc3545;
          color: white;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          font-weight: bold;
        "
      >
        Xóa toàn bộ lịch sử
      </button>
    </div>
  </div>
</div>
{% endblock %}
